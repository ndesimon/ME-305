\hypertarget{staging__area_2Lab_010x01_2LED__Patterns_8py}{}\doxysection{Lab 0x01/\+LED\+\_\+\+Patterns.py File Reference}
\label{staging__area_2Lab_010x01_2LED__Patterns_8py}\index{Lab 0x01/LED\_Patterns.py@{Lab 0x01/LED\_Patterns.py}}


Script to change LED light pattern for lab01.  


\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{staging__area_2Lab_010x01_2LED__Patterns_8py_a340a47974c5f1ffdc4c5a4548eb266aa}{LED\+\_\+\+Patterns.\+current\+\_\+time}} (time)
\begin{DoxyCompactList}\small\item\em Returns updated time difference between button push and current time. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{staging__area_2Lab_010x01_2LED__Patterns_8py_a14b25b7d67eedc91b1f893031e0f20d6}{LED\+\_\+\+Patterns.\+square\+\_\+wave}} (current\+\_\+time)
\begin{DoxyCompactList}\small\item\em runs LED with square wave pattern \end{DoxyCompactList}\item 
def \mbox{\hyperlink{staging__area_2Lab_010x01_2LED__Patterns_8py_a6605b283ee7b6bd0c22e4a714a494692}{LED\+\_\+\+Patterns.\+sine\+\_\+wave}} (current\+\_\+time)
\begin{DoxyCompactList}\small\item\em runs LED with square wave pattern \end{DoxyCompactList}\item 
def \mbox{\hyperlink{staging__area_2Lab_010x01_2LED__Patterns_8py_acca30dc54c439a715fc59d29c1e8d4cb}{LED\+\_\+\+Patterns.\+saw\+\_\+wave}} (current\+\_\+time)
\begin{DoxyCompactList}\small\item\em runs LED with square wave pattern \end{DoxyCompactList}\item 
def \mbox{\hyperlink{staging__area_2Lab_010x01_2LED__Patterns_8py_ac2d6dce8c61f2d9c2e0fa194261b0aee}{LED\+\_\+\+Patterns.\+button\+\_\+pressed}} (IRQ\+\_\+src)
\begin{DoxyCompactList}\small\item\em Sets button flag variable to true upon user button press. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{staging__area_2Lab_010x01_2LED__Patterns_8py_ae18518a1ff46443038e0bb52b4f56617}\label{staging__area_2Lab_010x01_2LED__Patterns_8py_ae18518a1ff46443038e0bb52b4f56617}} 
\mbox{\hyperlink{staging__area_2Lab_010x01_2LED__Patterns_8py_ae18518a1ff46443038e0bb52b4f56617}{LED\+\_\+\+Patterns.\+pin\+A5}} = pyb.\+Pin(pyb.\+Pin.\+cpu.\+A5)
\begin{DoxyCompactList}\small\item\em Assign Green LED on Nucleo to Pin A5 for PWM usage. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{staging__area_2Lab_010x01_2LED__Patterns_8py_a2d1509b2e82c9aa1028bf33e015ae365}\label{staging__area_2Lab_010x01_2LED__Patterns_8py_a2d1509b2e82c9aa1028bf33e015ae365}} 
\mbox{\hyperlink{staging__area_2Lab_010x01_2LED__Patterns_8py_a2d1509b2e82c9aa1028bf33e015ae365}{LED\+\_\+\+Patterns.\+tim2}} = pyb.\+Timer(2, freq = 20000)
\begin{DoxyCompactList}\small\item\em Establish Timer for PWM. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{staging__area_2Lab_010x01_2LED__Patterns_8py_a810656b888104afc66e6d95af0554010}\label{staging__area_2Lab_010x01_2LED__Patterns_8py_a810656b888104afc66e6d95af0554010}} 
\mbox{\hyperlink{staging__area_2Lab_010x01_2LED__Patterns_8py_a810656b888104afc66e6d95af0554010}{LED\+\_\+\+Patterns.\+t2ch1}} = tim2.\+channel(1, pyb.\+Timer.\+PWM, pin=pin\+A5)
\begin{DoxyCompactList}\small\item\em Link PWM to Pin A5. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{staging__area_2Lab_010x01_2LED__Patterns_8py_ac4002f275d8e6e9a67332887de24c976}\label{staging__area_2Lab_010x01_2LED__Patterns_8py_ac4002f275d8e6e9a67332887de24c976}} 
\mbox{\hyperlink{staging__area_2Lab_010x01_2LED__Patterns_8py_ac4002f275d8e6e9a67332887de24c976}{LED\+\_\+\+Patterns.\+pin\+C13}} = pyb.\+Pin (pyb.\+Pin.\+cpu.\+C13)
\begin{DoxyCompactList}\small\item\em Assign Blue Button on Nucleo to Pin C13 for Button Interrupt. \end{DoxyCompactList}\item 
\mbox{\hyperlink{staging__area_2Lab_010x01_2LED__Patterns_8py_a93d1c7ad1c88563da9464bbeb55f381d}{LED\+\_\+\+Patterns.\+Button\+Int}}
\begin{DoxyCompactList}\small\item\em External interrupt associated with the blue button\textquotesingle{}s callback function. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{staging__area_2Lab_010x01_2LED__Patterns_8py_a8c90cedd635d2debb86cf91c02754d62}\label{staging__area_2Lab_010x01_2LED__Patterns_8py_a8c90cedd635d2debb86cf91c02754d62}} 
int \mbox{\hyperlink{staging__area_2Lab_010x01_2LED__Patterns_8py_a8c90cedd635d2debb86cf91c02754d62}{LED\+\_\+\+Patterns.\+state}} = 0
\begin{DoxyCompactList}\small\item\em The current state for this iteration of the FSM. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{staging__area_2Lab_010x01_2LED__Patterns_8py_a634def343a1289d6e13bb55dc7336301}\label{staging__area_2Lab_010x01_2LED__Patterns_8py_a634def343a1289d6e13bb55dc7336301}} 
int \mbox{\hyperlink{staging__area_2Lab_010x01_2LED__Patterns_8py_a634def343a1289d6e13bb55dc7336301}{LED\+\_\+\+Patterns.\+runs}} = 0
\begin{DoxyCompactList}\small\item\em The current run loop of the program. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{staging__area_2Lab_010x01_2LED__Patterns_8py_a33d61026da8bd62d72740be32a6fa190}\label{staging__area_2Lab_010x01_2LED__Patterns_8py_a33d61026da8bd62d72740be32a6fa190}} 
int \mbox{\hyperlink{staging__area_2Lab_010x01_2LED__Patterns_8py_a33d61026da8bd62d72740be32a6fa190}{LED\+\_\+\+Patterns.\+blue\+\_\+button\+\_\+pressed}} = 0
\begin{DoxyCompactList}\small\item\em The current state of the button. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{staging__area_2Lab_010x01_2LED__Patterns_8py_a45ee11eda489a029500c9b2d7ac7aa5d}\label{staging__area_2Lab_010x01_2LED__Patterns_8py_a45ee11eda489a029500c9b2d7ac7aa5d}} 
bool \mbox{\hyperlink{staging__area_2Lab_010x01_2LED__Patterns_8py_a45ee11eda489a029500c9b2d7ac7aa5d}{LED\+\_\+\+Patterns.\+ran}} = False
\begin{DoxyCompactList}\small\item\em If the current state has already run once. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{staging__area_2Lab_010x01_2LED__Patterns_8py_aaa8320e1c2fe4f4cee48ffe9dcb4e6ea}\label{staging__area_2Lab_010x01_2LED__Patterns_8py_aaa8320e1c2fe4f4cee48ffe9dcb4e6ea}} 
{\bfseries LED\+\_\+\+Patterns.\+start\+\_\+time} = utime.\+ticks\+\_\+ms()
\item 
\mbox{\Hypertarget{staging__area_2Lab_010x01_2LED__Patterns_8py_a0d9ea9d9aa71c613ec2d83ab07ed0551}\label{staging__area_2Lab_010x01_2LED__Patterns_8py_a0d9ea9d9aa71c613ec2d83ab07ed0551}} 
def {\bfseries LED\+\_\+\+Patterns.\+timer} = current\+\_\+time(start\+\_\+time)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Script to change LED light pattern for lab01. 

Using pyb and utime, the script changes a specific LED light on a nucelo board in 3 different patterns\+: square qave, sine wave, and saw wave.



See source code here\+: \href{https://bitbucket.org/ndesimon/me405_labs/src/master/Lab\%200x01/LED_Patterns.py}{\texttt{ https\+://bitbucket.\+org/ndesimon/me405\+\_\+labs/src/master/\+Lab\%200x01/\+LED\+\_\+\+Patterns.\+py}}

See short demonstration video here\+: \href{https://drive.google.com/file/d/1gsICIg6rI42QG8VJxdCG4akqodxdDdyq/view}{\texttt{ https\+://drive.\+google.\+com/file/d/1gs\+ICIg6r\+I42\+QG8\+VJxd\+CG4akqodxd\+Ddyq/view}}

\begin{DoxyAuthor}{Author}
Tyler Mc\+Cue, Nick De Simone 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
10/8/2021 
\end{DoxyDate}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{staging__area_2Lab_010x01_2LED__Patterns_8py_ac2d6dce8c61f2d9c2e0fa194261b0aee}\label{staging__area_2Lab_010x01_2LED__Patterns_8py_ac2d6dce8c61f2d9c2e0fa194261b0aee}} 
\index{LED\_Patterns.py@{LED\_Patterns.py}!button\_pressed@{button\_pressed}}
\index{button\_pressed@{button\_pressed}!LED\_Patterns.py@{LED\_Patterns.py}}
\doxysubsubsection{\texorpdfstring{button\_pressed()}{button\_pressed()}}
{\footnotesize\ttfamily def LED\+\_\+\+Patterns.\+button\+\_\+pressed (\begin{DoxyParamCaption}\item[{}]{IRQ\+\_\+src }\end{DoxyParamCaption})}



Sets button flag variable to true upon user button press. 


\begin{DoxyParams}{Parameters}
{\em IRQ\+\_\+src} & Interrupt request triggered by button push \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{staging__area_2Lab_010x01_2LED__Patterns_8py_a340a47974c5f1ffdc4c5a4548eb266aa}\label{staging__area_2Lab_010x01_2LED__Patterns_8py_a340a47974c5f1ffdc4c5a4548eb266aa}} 
\index{LED\_Patterns.py@{LED\_Patterns.py}!current\_time@{current\_time}}
\index{current\_time@{current\_time}!LED\_Patterns.py@{LED\_Patterns.py}}
\doxysubsubsection{\texorpdfstring{current\_time()}{current\_time()}}
{\footnotesize\ttfamily def LED\+\_\+\+Patterns.\+current\+\_\+time (\begin{DoxyParamCaption}\item[{}]{time }\end{DoxyParamCaption})}



Returns updated time difference between button push and current time. 

Uses the utime module to return a running clock that then updates the LED patterns \mbox{\Hypertarget{staging__area_2Lab_010x01_2LED__Patterns_8py_acca30dc54c439a715fc59d29c1e8d4cb}\label{staging__area_2Lab_010x01_2LED__Patterns_8py_acca30dc54c439a715fc59d29c1e8d4cb}} 
\index{LED\_Patterns.py@{LED\_Patterns.py}!saw\_wave@{saw\_wave}}
\index{saw\_wave@{saw\_wave}!LED\_Patterns.py@{LED\_Patterns.py}}
\doxysubsubsection{\texorpdfstring{saw\_wave()}{saw\_wave()}}
{\footnotesize\ttfamily def LED\+\_\+\+Patterns.\+saw\+\_\+wave (\begin{DoxyParamCaption}\item[{}]{current\+\_\+time }\end{DoxyParamCaption})}



runs LED with square wave pattern 

Using the pyb module, an LED flashes in a square wave pattern \mbox{\Hypertarget{staging__area_2Lab_010x01_2LED__Patterns_8py_a6605b283ee7b6bd0c22e4a714a494692}\label{staging__area_2Lab_010x01_2LED__Patterns_8py_a6605b283ee7b6bd0c22e4a714a494692}} 
\index{LED\_Patterns.py@{LED\_Patterns.py}!sine\_wave@{sine\_wave}}
\index{sine\_wave@{sine\_wave}!LED\_Patterns.py@{LED\_Patterns.py}}
\doxysubsubsection{\texorpdfstring{sine\_wave()}{sine\_wave()}}
{\footnotesize\ttfamily def LED\+\_\+\+Patterns.\+sine\+\_\+wave (\begin{DoxyParamCaption}\item[{}]{current\+\_\+time }\end{DoxyParamCaption})}



runs LED with square wave pattern 

Using the pyb module, an LED flashes in a square wave pattern \mbox{\Hypertarget{staging__area_2Lab_010x01_2LED__Patterns_8py_a14b25b7d67eedc91b1f893031e0f20d6}\label{staging__area_2Lab_010x01_2LED__Patterns_8py_a14b25b7d67eedc91b1f893031e0f20d6}} 
\index{LED\_Patterns.py@{LED\_Patterns.py}!square\_wave@{square\_wave}}
\index{square\_wave@{square\_wave}!LED\_Patterns.py@{LED\_Patterns.py}}
\doxysubsubsection{\texorpdfstring{square\_wave()}{square\_wave()}}
{\footnotesize\ttfamily def LED\+\_\+\+Patterns.\+square\+\_\+wave (\begin{DoxyParamCaption}\item[{}]{current\+\_\+time }\end{DoxyParamCaption})}



runs LED with square wave pattern 

Using the pyb module, an LED flashes in a square wave pattern 
\begin{DoxyParams}{Parameters}
{\em current\+\_\+time} & Accumulated time difference between button push and current time \\
\hline
\end{DoxyParams}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{staging__area_2Lab_010x01_2LED__Patterns_8py_a93d1c7ad1c88563da9464bbeb55f381d}\label{staging__area_2Lab_010x01_2LED__Patterns_8py_a93d1c7ad1c88563da9464bbeb55f381d}} 
\index{LED\_Patterns.py@{LED\_Patterns.py}!ButtonInt@{ButtonInt}}
\index{ButtonInt@{ButtonInt}!LED\_Patterns.py@{LED\_Patterns.py}}
\doxysubsubsection{\texorpdfstring{ButtonInt}{ButtonInt}}
{\footnotesize\ttfamily LED\+\_\+\+Patterns.\+Button\+Int}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 =  pyb.ExtInt(pinC13, mode=pyb.ExtInt.IRQ\_FALLING,}
\DoxyCodeLine{2                            pull=pyb.Pin.PULL\_NONE, callback=button\_pressed)}

\end{DoxyCode}


External interrupt associated with the blue button\textquotesingle{}s callback function. 

